{"version":3,"sources":["../node_modules/peerjs/dist sync","components/VideoChat/MessageBox/MessageBox.js","components/VideoChat/Spinner/Spinner.js","components/VideoChat/TextChat/TextChat.js","components/VideoChat/ModalNew/Modal.js","components/VideoChat/VideoChat/VideoChat.js","components/VideoChat/InitialScreen/InitialScreen.js","components/VideoChat/UserList/UserList.js","components/VideoChat/ChatLayout.js","components/VideoChat/Login/components/Login.js","components/VideoChat/Login/components/Signup.js","components/VideoChat/Login/Auth.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","MessageBox","props","currentUser","user","message","messages","react_default","a","createElement","Fragment","map","index","newdate","date","newDate","Date","concat","getDate","getMonth","getHours","getMinutes","dateFormater","className","key","Spinner","TextChat","_ref","selectedUser","setCallStatus","socket","call","useContext","Socket","_useState","useState","_useState2","Object","slicedToArray","setMessages","_useState3","_useState4","input","setInput","_useState5","_useState6","spinner","setSpinner","_useState7","_useState8","setCurrentUser","messageBox","useRef","inputRef","useEffect","axios","get","withCredentials","then","data","userInfo","room","sessions","emit","on","toConsumableArray","window","location","reload","removeAllListeners","current","scrollBy","scrollHeight","username","slice","onClick","type","ref","autoComplete","onSubmit","preventDefault","send","focus","name","value","placeholder","onChange","persist","target","Spinner_Spinner","Modal","reject","accept","config","host","path","iceServers","url","credential","VideoChat","callNumber","myNumber","callStatus","callState","setCallState","peerState","setPeerState","remoteStream","setRemoteStream","connection","setConnection","_call","apply","this","arguments","asyncToGenerator","regenerator_default","mark","_callee2","userMedia","wrap","_context2","prev","next","navigator","mediaDevices","getUserMedia","video","audio","sent","callListner","peer","stop","localStream","rStream","getTracks","forEach","element","Peer","_ref2","_callee","_context","answer","_x","conn","connect","autoPlay","srcObject","close","hostname","port","InitialScreen","UserInfo","first_name","last_name","UserList","React","memo","usersList","pageState","setSelectedUser","userListIsOpen","users","setUsers","find","setFind","filtredUsers","setFiltredUsers","selectUser","getAttribute","innerText","getUsersList","arr","max","hex","bg","Math","floor","random","toString","padEnd","clr","parseInt","login","data-id","style","background","color","isOnline","localStorage","removeItem","filter","item","includes","length","createContext","Chat","userList","setUserList","setUserInfo","_useState9","_useState10","setUserListIsOpen","PageState","offLine","_offLine","online","_online","_callee3","_context3","addEventListener","getItem","removeEventListener","state","Provider","UserList_UserList","TextChat_TextChat","Login","setPageState","password","userData","setUserData","_submit","abrupt","post","status","setItem","changeHandler","_e$target","objectSpread2","defineProperty","htmlFor","SignUp","confPassword","email","resp","console","log","t0","react","fallback"],"mappings":"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","file":"static/js/6.92239e36.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 202;","import React from 'react'\r\n\r\nexport function MessageBox(props) {\r\n  const currentUser = props.user;\r\n  const message = props.messages;\r\n\r\n  function dateFormater(date) {\r\n    const months = [\r\n      'January',\r\n      'February',\r\n      'March',\r\n      'April',\r\n      'May',\r\n      'June',\r\n      'July',\r\n      'August',\r\n      'September',\r\n      'October',\r\n      'November',\r\n      'December'\r\n      ]\r\n    const newDate = new Date(date);\r\n    return `${newDate.getDate()} ${months[newDate.getMonth()+1]} - ${newDate.getHours()}:${newDate.getMinutes() < 10 ? '0' + newDate.getMinutes() : newDate.getMinutes()}`;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {message.map((message, index) => {\r\n        const newdate = dateFormater(message.date);\r\n\r\n        return (\r\n          <div className={message.user === currentUser.id ? 'right' : 'left'} key={index}>\r\n            <p className='message-text'>{message.message}</p>\r\n            <p className='date'>{newdate}</p>\r\n          </div>\r\n        )\r\n      })}\r\n    </>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport './Spinner.scss';\r\n\r\nexport default function Spinner(){\r\n  return(\r\n    <div className=\"lds-dual-ring\"></div>\r\n  )\r\n}","import React, {useState, useEffect, useRef, useContext} from 'react';\r\nimport { Socket } from '../../../socketContext/socket';\r\nimport { MessageBox } from '../MessageBox/MessageBox';\r\nimport Spinner from '../Spinner/Spinner';\r\nimport axios from 'axios';\r\nimport './TextChat.scss';\r\n\r\nexport function TextChat({selectedUser, setCallStatus, call}) {\r\n  const socket = useContext(Socket);\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState();\r\n  const [spinner, setSpinner] = useState(false);\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const messageBox = useRef(null);\r\n  const inputRef = useRef(null);\r\n\r\n  useEffect(()=>{\r\n    setSpinner(true)\r\n    axios.get('https://rocky-reef-68087.herokuapp.com/users', {withCredentials: true}).then(data => {\r\n      const userInfo = data.data;\r\n      setCurrentUser(userInfo);\r\n      if(userInfo.id === selectedUser.id) {\r\n        window.location.reload();\r\n        return;\r\n      }\r\n      const room = userInfo.sessions && userInfo.sessions[selectedUser.id] ? userInfo.sessions[selectedUser.id] : 'new';\r\n      socket.emit('join', room, [userInfo.id, selectedUser.id]);\r\n\r\n      socket.on('message', (message) => {\r\n        setMessages(messages => [...messages, message]);\r\n      })\r\n\r\n      socket.on('messages', data => {\r\n        setMessages(data);\r\n      })\r\n      setSpinner(false);\r\n    });\r\n\r\n    return () => {\r\n      socket.emit('leave')\r\n      socket.removeAllListeners('message');\r\n      socket.removeAllListeners('messages');\r\n    }\r\n  }, [selectedUser.id]);\r\n\r\n  useEffect(()=>{\r\n    messageBox.current.scrollBy(0, messageBox.current.scrollHeight);\r\n  }, [messages])\r\n\r\n  function sendData(e) {\r\n    e.preventDefault(e);\r\n    setInput('');\r\n    setMessages(messages => [...messages, {\r\n      message: input,\r\n      user: currentUser.id,\r\n      date: new Date()\r\n    }]);\r\n    socket.send(input);\r\n    inputRef.current.focus();\r\n  }\r\n\r\n  function inputHendler(e){\r\n    e.persist();\r\n    setInput(e.target.value);\r\n  }\r\n\r\n\treturn (\r\n\t\t<div className=\"TextChat\">\r\n      <div className=\"chat-controller\">\r\n        <h2>Chat with {selectedUser.username.slice(3)}</h2>\r\n        <div className=\"buttons\">\r\n          <i className=\"fas fa-user-plus\"></i>\r\n          <i onClick={() => setCallStatus({type: 'startCall', user: selectedUser})} className=\"fas fa-phone\"></i>\r\n        </div>\r\n      </div>\r\n\t\t\t<div ref={messageBox} className='messages-wrap'>\r\n\t\t\t\t<MessageBox messages={messages} user={currentUser}></MessageBox>\r\n\t\t\t</div>\r\n\t\t\t<div className='input'>\r\n\t\t\t\t<form autoComplete='off' onSubmit={sendData}>\r\n\t\t\t\t\t<input name='message' ref={inputRef} value={input} placeholder='Type something...' onChange={inputHendler} type='text'></input>\r\n\t\t\t\t\t<button type='submit'>Send</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n      {spinner && <Spinner/>}\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport './modal.scss';\r\n\r\nexport function Modal({user, reject, accept, className}) {\r\n  return (\r\n    <div className={`modal-frame ${className}`}>\r\n      <h2>Incoming call from {user}</h2>\r\n      <div className='modal-controls'>\r\n        <i onClick={reject} className=\"fas fa-phone-slash\"></i>\r\n        <i onClick={accept} className=\"fas fa-phone\"></i>\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n","import React, {useEffect, useContext, useState} from 'react';\r\nimport { Modal } from '../ModalNew/Modal';\r\nimport Peer from 'peerjs';\r\nimport './videochat.scss';\r\n\r\nconst stunServers = [\r\n  { url: 'stun:stun.l.google.com:19302' },\r\n  { url: 'stun:stun1.l.google.com:19302' },\r\n  { url: 'stun:stun2.l.google.com:19302' },\r\n  { url: 'stun:stun3.l.google.com:19302' },\r\n  { url: 'stun:stun4.l.google.com:19302' },\r\n  {\r\n    url: 'turn:numb.viagenie.ca',\r\n    credential: 'muazkh',\r\n    username: 'webrtc@live.com',\r\n  },\r\n  {\r\n    url: 'turn:192.158.29.39:3478?transport=udp',\r\n    credential: 'JZEOEt2V3Qb0y27GRntt2u2PAYA=',\r\n    username: '28224511:1379330808',\r\n  },\r\n  {\r\n    url: 'turn:192.158.29.39:3478?transport=tcp',\r\n    credential: 'JZEOEt2V3Qb0y27GRntt2u2PAYA=',\r\n    username: '28224511:1379330808',\r\n  },\r\n];\r\n\r\nconst config = {\r\n  host: 'haunted-vault-85408.herokuapp.com',\r\n  path: '/peer-api',\r\n  config: { iceServers: stunServers },\r\n};\r\n\r\nif (window.location.hostname === 'localhost') {\r\n  config.port = 9000;\r\n}\r\n\r\n\r\nexport function VideoChat({callNumber, myNumber, callStatus, setCallStatus}) {\r\n  const [callState, setCallState] = useState({});\r\n  const [peerState, setPeerState] = useState({});\r\n  const [remoteStream, setRemoteStream] = useState(null);\r\n  const [connection, setConnection] = useState({});\r\n\r\n  useEffect(()=>{\r\n    let peer;\r\n\r\n    if(myNumber){\r\n      peer = new Peer(myNumber, config);\r\n      setPeerState({peer})\r\n    }\r\n\r\n    if(peer) {\r\n      peer.on('call', async (call) => {\r\n        const userMedia = await navigator.mediaDevices.getUserMedia({video: true, audio: true});\r\n        call.answer(userMedia);\r\n        callListner(call);\r\n      })\r\n\r\n      peer.on('connection', (conn) => {\r\n        conn.on('data', (data) => {\r\n          if(data.type === 'endCall') {\r\n            setCallState({});\r\n            return;\r\n          }\r\n          setCallState({type:'incomingRequest', data: data.data});\r\n          setConnection(conn);\r\n        })\r\n      })\r\n    }\r\n  }, [myNumber]);\r\n\r\n  useEffect(()=>{\r\n    if(callStatus.type === 'startCall') {\r\n      const conn = peerState.peer.connect(callNumber);\r\n      conn.on('open', ()=>{\r\n        conn.send({type: 'request', data: myNumber});\r\n      })\r\n\r\n      conn.on('data', (data)=>{\r\n        if(data.type === 'rejected') {\r\n          setCallState({});\r\n          setCallStatus({type: 'ended'});\r\n        }\r\n      })\r\n      setConnection(conn);\r\n    }\r\n  }, [callStatus.type])\r\n\r\n\r\n  async function call() {\r\n    const callNumber = callState.data;\r\n    const userMedia = await navigator.mediaDevices.getUserMedia({video: true, audio: true});\r\n    const call = peerState.peer.call(callNumber, userMedia);\r\n    callListner(call);\r\n  }\r\n\r\n  function callListner(call) {\r\n    let localStream;\r\n    call.on('stream', (rStream) => {\r\n      setCallStatus({type: 'started'});\r\n      localStream = call.localStream;\r\n      setRemoteStream(rStream)\r\n    });\r\n\r\n    call.on('close', () => {\r\n      localStream.getTracks().forEach(element => {\r\n        element.stop();\r\n      });\r\n      setCallState({});\r\n    })\r\n    setCallState({type: 'call', call: call});\r\n  }\r\n\r\n  function endCall() {\r\n    if(callState.call) {\r\n      callState.call.close();\r\n    } else {\r\n      setCallState({});\r\n      setCallStatus({type: 'ended'});\r\n      connection.send({type: 'endCall'})\r\n    }\r\n  }\r\n\r\n  function reject() {\r\n    connection.send({type: 'rejected'});\r\n    setCallStatus({type: 'ended'});\r\n    setCallState({});\r\n  }\r\n\r\n  // if(callState?.type === 'call' || callStatus.type === 'startCall') {\r\n    return (\r\n      <>\r\n        <Modal className={callState?.type === 'incomingRequest' ? 'show':'hide'} reject={reject} accept={call}></Modal>\r\n        <div className={`video-chat ${callState?.type === 'call' || callStatus.type === 'startCall' ? 'video-active' : 'video-hide'}`}>\r\n          {callStatus.type === 'startCall' && <><div className='animate'/><div className='started-calling'>{callStatus.user.username.slice(0, 2)}</div></>}\r\n          {callStatus.type !== 'startCall' && <video autoPlay ref={(video) => video && remoteStream ? video.srcObject = remoteStream : ''}></video>}\r\n          <div className='video-chat-controll'>\r\n            <i className=\"fas fa-microphone-alt-slash\"></i>\r\n            <i onClick={endCall} className=\"fas fa-phone-slash\"></i>\r\n          </div>\r\n        </div>\r\n      </>\r\n    )\r\n  // }\r\n\r\n  return(<Modal className={callState?.type === 'incomingRequest' ? 'show':'hide'} reject={reject} accept={call}></Modal>)\r\n}\r\n","import React, {useContext} from 'react';\r\nimport {UserInfo} from '../ChatLayout'\r\nimport './initialScreen.scss';\r\n\r\nexport function InitialScreen() {\r\n  const user = useContext(UserInfo);\r\n\r\n  return (\r\n    <div className='initial-screen'>\r\n      <h2>\r\n      {user.first_name} {user.last_name}<br/>\r\n        Welcom to my application.\r\n      </h2>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState, useEffect, useContext } from 'react'\r\nimport './userlist.scss';\r\nimport { UserInfo } from '../ChatLayout'\r\n\r\nexport const UserList = React.memo(function UserList({usersList, pageState, setSelectedUser, userListIsOpen}) {\r\n  const [users, setUsers] = useState([]);\r\n  const userInfo = useContext(UserInfo);\r\n  const [find, setFind] = useState([]);\r\n  const [filtredUsers, setFiltredUsers] = useState([]);\r\n\r\n  const findUser = (e) => {\r\n    e.persist();\r\n    setFind(e.target.value);\r\n    setFiltredUsers(() => {\r\n      return usersList.filter(item => item.login !== userInfo.login && item.first_name.includes(find) || item.last_name.includes(find))\r\n    });\r\n    if (!e.target.value) {\r\n      setFiltredUsers([]);\r\n    }\r\n  }\r\n\r\n  useEffect(()=>{\r\n    setUsers(usersList);\r\n  }, [usersList]);\r\n\r\n  function getRandom(max) {\r\n    return '#' + Math.floor(Math.random() * Math.floor(max)).toString(16);\r\n  }\r\n\r\n  function hexContrastCalc(hex) {\r\n    const red = parseInt(hex[1]+hex[2], 16);\r\n    const green = parseInt(hex[3]+hex[4], 16);\r\n    const blue = parseInt(hex[5]+hex[6], 16);\r\n    return red*0.2126 + green*0.7152 + blue*0.0722 < 126;\r\n  }\r\n\r\n  function selectUser(e) {\r\n    setSelectedUser({id: e.target.getAttribute('data-id'), username: e.target.innerText});\r\n  }\r\n\r\n  function logOut() {\r\n    localStorage.removeItem('logined');\r\n    pageState('Login');\r\n    window.location.reload();\r\n  }\r\n\r\n  function getUsersList(arr) {\r\n    return arr.map((user, index) => {\r\n      const bg = getRandom(16777214).padEnd(7, '0');\r\n      const clr = hexContrastCalc(bg);\r\n      if(user.login === userInfo.login) {\r\n        return ''\r\n      };\r\n      return <li onClick={selectUser} key={index} data-id={user.id}><span style={{background: bg, color: clr ? '#fff' : '#000'}}><div className={`status ${user.isOnline ? 'online' : 'offline'}`}></div>{user.first_name[0]}{user.last_name[0]}</span>{user.first_name} {user.last_name}</li>\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className={`user-list-wrapper ${userListIsOpen ? 'show' : 'hidden'}`}>\r\n      <div className='user-info'>\r\n        <h3>{userInfo.first_name} {userInfo.last_name}</h3>\r\n        <div call='controll'>\r\n          <i onClick={logOut} className=\"fas fa-sign-out-alt\"></i>\r\n        </div>\r\n      </div>\r\n      <div className=\"list-controllers\">\r\n        <button className=\"user-changer\">My Contacts</button>\r\n        <button className=\"user-changer\">All Users</button>\r\n      </div>\r\n      <input type=\"text\" value={find} onChange={findUser} className=\"find user\" placeholder=\"Start typing\"></input>\r\n      <ul className='user-list'>\r\n        {filtredUsers.length || find.length ? getUsersList(filtredUsers) : getUsersList(users)}\r\n      </ul>\r\n    </div>\r\n  )\r\n});\r\n","import React, {useEffect, useState, useContext} from 'react';\r\nimport './chatLayout.scss'\r\nimport { TextChat } from './TextChat/TextChat';\r\nimport { VideoChat } from './VideoChat/VideoChat';\r\nimport { InitialScreen } from './InitialScreen/InitialScreen';\r\nimport axios from 'axios';\r\nimport { UserList } from './UserList/UserList';\r\nimport { PageState } from './Login/Auth';\r\nimport { Modal } from './ModalNew/Modal';\r\n\r\nexport const UserInfo = React.createContext()\r\n\r\nexport default function Chat() {\r\n  const [userList, setUserList] = useState([]);\r\n  const [userInfo, setUserInfo] = useState({});\r\n  const [selectedUser, setSelectedUser] = useState(null);\r\n  const [callStatus, setCallStatus] = useState('');\r\n  const [userListIsOpen, setUserListIsOpen] = useState(false);\r\n  const pageState = useContext(PageState);\r\n\r\n  async function offLine() {\r\n    await axios.get('https://rocky-reef-68087.herokuapp.com/offline?st=false', {withCredentials: true});\r\n  }\r\n\r\n  async function online() {\r\n    await axios.get('https://rocky-reef-68087.herokuapp.com/offline?st=true', {withCredentials: true});\r\n  }\r\n\r\n  useEffect(()=>{\r\n    (async ()=>{\r\n      const user = await axios.get('https://rocky-reef-68087.herokuapp.com/users', {withCredentials: true});\r\n      const users = await axios.get('https://rocky-reef-68087.herokuapp.com/allUsers', {withCredentials: true});\r\n      setUserList(users.data);\r\n      setUserInfo(user.data);\r\n    })();\r\n\r\n    window.addEventListener('beforeunload', offLine);\r\n    if(localStorage.getItem('logined')){\r\n      window.addEventListener('load', online);\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener('load', online);\r\n      window.removeEventListener('beforeunload', offLine);\r\n    }\r\n  }, []);\r\n\r\n\treturn (\r\n    <>\r\n    {callStatus.type === 'request' && <Modal/>}\r\n      <div className=\"chat-wrapper\">\r\n        <i onClick={() => setUserListIsOpen((state) => !state)} className={`fas fa-arrow-left ${userListIsOpen ? 'open' : 'close'}`}></i>\r\n        <UserInfo.Provider value={userInfo}>\r\n          <UserList userListIsOpen={userListIsOpen} usersList={userList} pageState={pageState} setSelectedUser={setSelectedUser}/>\r\n          {!selectedUser && <InitialScreen></InitialScreen>}\r\n          {selectedUser &&<TextChat setCallStatus={setCallStatus} pageState={pageState} selectedUser={selectedUser}></TextChat>}\r\n          <VideoChat setCallStatus={setCallStatus} callStatus={callStatus} pageState={pageState} callNumber={selectedUser?.id} myNumber={userInfo.id} ></VideoChat>\r\n        </UserInfo.Provider>\r\n      </div>\r\n    </>\r\n\t);\r\n}\r\n","import React, {useState, useEffect} from 'react';\r\nimport Spinner from '../../Spinner/Spinner';\r\nimport axios from 'axios';\r\nimport './login.scss';\r\n\r\nexport function Login({setPageState}) {\r\n  const [userData, setUserData] = useState({\r\n    login: '',\r\n    password: ''\r\n  });\r\n\r\n  const [spinner, setSpinner] = useState(false);\r\n\r\n  async function submit(e) {\r\n    e.preventDefault();\r\n\r\n    if(!userData.login || !userData.password){\r\n      return;\r\n    }\r\n\r\n    setSpinner(true);\r\n    const response = await axios.post('https://rocky-reef-68087.herokuapp.com/auth', userData, {withCredentials: true});\r\n    if(response.status === 200) {\r\n      localStorage.setItem('logined', true);\r\n      setPageState('Logined');\r\n    }\r\n    setSpinner(false);\r\n  }\r\n\r\n  function changeHandler(e) {\r\n    e.persist();\r\n    setUserData(data => ({...data, [e.target.name]: e.target?.value}));\r\n  }\r\n\r\n  return (\r\n    <div className='login-wrap'>\r\n      <div>\r\n        <form className='user-connection' onSubmit={submit}>\r\n        {spinner && <Spinner></Spinner>}\r\n          <h2 className=\"form-signin-heading\">Sign in</h2>\r\n          <label htmlFor='login'>Login</label>\r\n          <input id='login' placeholder=\"login\" type=\"text\" name='login' value={userData.login} onChange={changeHandler}/>\r\n          <label htmlFor='login'>Passowrd</label>\r\n          <input type=\"password\" id='password' className=\"form-control\" name=\"password\" placeholder=\"password\" value={userData.password} onChange={changeHandler}/>\r\n          <input className=\"submitButton\" type=\"submit\" value='Login'/>\r\n          <h2>Don't have an account?</h2>\r\n          <button onClick={() => setPageState('Reg')} className='reg_btn'>Create an account</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, {useState} from 'react';\r\nimport Spinner from '../../Spinner/Spinner';\r\nimport axios from 'axios';\r\nimport './login.scss';\r\n\r\nexport function SignUp({setPageState}) {\r\n  const [userData, setUserData] = useState({\r\n    login: '',\r\n    password: '',\r\n    confPassword: '',\r\n    email: '',\r\n  });\r\n\r\n  const [spinner, setSpinner] = useState(false);\r\n\r\n  async function submit(e) {\r\n    e.preventDefault();\r\n\r\n    if(!userData.login || !userData.password){\r\n      return;\r\n    }\r\n\r\n    setSpinner(true);\r\n    try {\r\n      const resp = await axios.post('https://rocky-reef-68087.herokuapp.com/register', userData);\r\n      console.log(resp);\r\n    }\r\n    catch (err) {\r\n      setSpinner(false);\r\n    }\r\n    setSpinner(false);\r\n    setPageState('Login');\r\n  }\r\n\r\n  function changeHandler(e) {\r\n    e.persist();\r\n    setUserData(data => ({...data, [e.target.name]: e.target?.value}));\r\n  }\r\n\r\n  return (\r\n    <div className='login-wrap'>\r\n      <div>\r\n        <form className='user-connection' onSubmit={submit}>\r\n        {spinner && <Spinner></Spinner>}\r\n          <h2 className=\"form-signin-heading\">Sign up</h2>\r\n          <label htmlFor='login'>Login</label>\r\n          <input id='login' placeholder=\"login\" type=\"text\" name='login' value={userData.login} onChange={changeHandler}/>\r\n          <label htmlFor='login'>Passowrd</label>\r\n          <input type=\"password\" autoComplete=\"off\" id='password' className=\"form-control\" name=\"password\" placeholder=\"password\" value={userData.password} onChange={changeHandler}/>\r\n          <label htmlFor='confPassword'>Confirm Passowrd</label>\r\n          <input id='confPassword' autoComplete=\"off\" placeholder=\"Password\" type=\"password\" name='confPassword' value={userData.confPassword} onChange={changeHandler}/>\r\n          <label htmlFor='login'>Email (optional)</label>\r\n          <input id='email' placeholder=\"email\" type=\"mail\" name='email' value={userData.email} onChange={changeHandler}/>\r\n          <label htmlFor='login'>First Name</label>\r\n          <input id='first_name' placeholder=\"first_name\" type=\"text\" name='first_name' value={userData.first_name} onChange={changeHandler}/>\r\n          <label htmlFor='login'>Last Name</label>\r\n          <input id='last_name' placeholder=\"last_name\" type=\"mail\" name='last_name' value={userData.last_name} onChange={changeHandler}/>\r\n          <input className=\"submitButton\" type=\"submit\" value='Start!'/>\r\n          <h2>Do have an account?</h2>\r\n          <button onClick={() => setPageState('Login')} className='reg_btn'>Sign In</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, {useEffect, useState, Suspense, useContext} from 'react';\r\nimport ChatLayout from '../ChatLayout';\r\nimport { Login } from './components/Login.js'\r\nimport { SignUp } from './components/Signup.js'\r\nimport Spinner from '../Spinner/Spinner';\r\n\r\nexport const PageState = React.createContext()\r\n\r\nexport default function Chat() {\r\n  const [pageState, setPageState] = useState('Login');\r\n\r\n  if(!localStorage.getItem('logined')) {\r\n    if(pageState === 'Login') return <Login setPageState={setPageState} />\r\n    if(pageState === 'Reg') return <SignUp setPageState={setPageState} />\r\n  }\r\n\r\n\treturn (\r\n\t\t<Suspense fallback={<div className='spinner-main'><Spinner></Spinner></div>}>\r\n      <PageState.Provider value={setPageState}>\r\n\t\t\t  <ChatLayout user={pageState.users}></ChatLayout>\r\n      </PageState.Provider>\r\n\t\t</Suspense>\r\n\t);\r\n}\r\n"],"sourceRoot":""}