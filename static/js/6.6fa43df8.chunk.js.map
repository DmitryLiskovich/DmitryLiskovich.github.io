{"version":3,"sources":["../node_modules/peerjs/dist sync","components/VideoChat/MessageBox/MessageBox.js","components/VideoChat/Spinner/Spinner.js","components/VideoChat/TextChat/TextChat.js","components/VideoChat/ModalNew/Modal.js","components/VideoChat/VideoChat/VideoChat.js","components/VideoChat/InitialScreen/InitialScreen.js","components/VideoChat/UserList/UserList.js","components/VideoChat/ChatLayout.js","components/VideoChat/Login/components/Login.js","components/VideoChat/Login/components/Signup.js","components/VideoChat/Login/Auth.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","MessageBox","props","currentUser","user","message","messages","react_default","a","createElement","Fragment","map","index","newdate","date","newDate","Date","concat","getDate","getMonth","getHours","getMinutes","dateFormater","className","key","Spinner","TextChat","_ref","selectedUser","setCallStatus","socket","call","useContext","Socket","_useState","useState","_useState2","Object","slicedToArray","setMessages","_useState3","_useState4","input","setInput","_useState5","_useState6","spinner","setSpinner","_useState7","_useState8","setCurrentUser","messageBox","useRef","inputRef","useEffect","axios","get","withCredentials","then","data","userInfo","room","sessions","emit","on","toConsumableArray","window","location","reload","removeAllListeners","current","scrollBy","scrollHeight","username","slice","onClick","type","ref","autoComplete","onSubmit","preventDefault","send","focus","name","value","placeholder","onChange","persist","target","Spinner_Spinner","Modal","reject","accept","config","host","port","path","VideoChat","callNumber","myNumber","callStatus","callState","setCallState","peerState","setPeerState","remoteStream","setRemoteStream","connection","setConnection","_call","apply","this","arguments","asyncToGenerator","regenerator_default","mark","_callee2","userMedia","wrap","_context2","prev","next","navigator","mediaDevices","getUserMedia","video","audio","sent","callListner","peer","stop","localStream","rStream","getTracks","forEach","element","Peer","_ref2","_callee","_context","answer","_x","conn","connect","autoPlay","srcObject","close","InitialScreen","UserInfo","first_name","last_name","UserList","React","memo","usersList","pageState","setSelectedUser","users","setUsers","find","setFind","filtredUsers","setFiltredUsers","selectUser","getAttribute","innerText","getUsersList","arr","max","hex","bg","Math","floor","random","toString","padEnd","clr","parseInt","login","data-id","style","background","color","isOnline","localStorage","removeItem","filter","item","includes","length","createContext","Chat","userList","setUserList","setUserInfo","PageState","offLine","_offLine","online","_online","_callee3","_context3","addEventListener","getItem","removeEventListener","Provider","UserList_UserList","TextChat_TextChat","Login","setPageState","password","userData","setUserData","_submit","abrupt","post","status","setItem","changeHandler","_e$target","objectSpread2","defineProperty","htmlFor","SignUp","confPassword","email","resp","console","log","t0","react","fallback"],"mappings":"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","file":"static/js/6.6fa43df8.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 202;","import React from 'react'\r\n\r\nexport function MessageBox(props) {\r\n  const currentUser = props.user;\r\n  const message = props.messages;\r\n\r\n  function dateFormater(date) {\r\n    const months = [\r\n      'January',\r\n      'February',\r\n      'March',\r\n      'April',\r\n      'May',\r\n      'June',\r\n      'July',\r\n      'August',\r\n      'September',\r\n      'October',\r\n      'November',\r\n      'December'\r\n      ]\r\n    const newDate = new Date(date);\r\n    return `${newDate.getDate()} ${months[newDate.getMonth()+1]} - ${newDate.getHours()}:${newDate.getMinutes() < 10 ? '0' + newDate.getMinutes() : newDate.getMinutes()}`;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {message.map((message, index) => {\r\n        const newdate = dateFormater(message.date);\r\n\r\n        return (\r\n          <div className={message.user === currentUser.id ? 'right' : 'left'} key={index}>\r\n            <p className='message-text'>{message.message}</p>\r\n            <p className='date'>{newdate}</p>\r\n          </div>\r\n        )\r\n      })}\r\n    </>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport './Spinner.scss';\r\n\r\nexport default function Spinner(){\r\n  return(\r\n    <div className=\"lds-dual-ring\"></div>\r\n  )\r\n}","import React, {useState, useEffect, useRef, useContext} from 'react';\r\nimport { Socket } from '../../../socketContext/socket';\r\nimport { MessageBox } from '../MessageBox/MessageBox';\r\nimport Spinner from '../Spinner/Spinner';\r\nimport axios from 'axios';\r\nimport './TextChat.scss';\r\n\r\nexport function TextChat({selectedUser, setCallStatus, call}) {\r\n  const socket = useContext(Socket);\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState();\r\n  const [spinner, setSpinner] = useState(false);\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const messageBox = useRef(null);\r\n  const inputRef = useRef(null);\r\n\r\n  useEffect(()=>{\r\n    setSpinner(true)\r\n    axios.get('http://localhost:8000/users', {withCredentials: true}).then(data => {\r\n      const userInfo = data.data;\r\n      setCurrentUser(userInfo);\r\n      if(userInfo.id === selectedUser.id) {\r\n        window.location.reload();\r\n        return;\r\n      }\r\n      const room = userInfo.sessions && userInfo.sessions[selectedUser.id] ? userInfo.sessions[selectedUser.id] : 'new';\r\n      socket.emit('join', room, [userInfo.id, selectedUser.id]);\r\n\r\n      socket.on('message', (message) => {\r\n        setMessages(messages => [...messages, message]);\r\n      })\r\n\r\n      socket.on('messages', data => {\r\n        setMessages(data);\r\n      })\r\n      setSpinner(false);\r\n    });\r\n\r\n    return () => {\r\n      socket.emit('leave')\r\n      socket.removeAllListeners('message');\r\n      socket.removeAllListeners('messages');\r\n    }\r\n  }, [selectedUser.id]);\r\n\r\n  useEffect(()=>{\r\n    messageBox.current.scrollBy(0, messageBox.current.scrollHeight);\r\n  }, [messages])\r\n\r\n  function sendData(e) {\r\n    e.preventDefault(e);\r\n    setInput('');\r\n    setMessages(messages => [...messages, {\r\n      message: input,\r\n      user: currentUser.id,\r\n      date: new Date()\r\n    }]);\r\n    socket.send(input);\r\n    inputRef.current.focus();\r\n  }\r\n\r\n  function inputHendler(e){\r\n    e.persist();\r\n    setInput(e.target.value);\r\n  }\r\n\r\n\treturn (\r\n\t\t<div className=\"TextChat\">\r\n      <div className=\"chat-controller\">\r\n        <h2>Chat with {selectedUser.username.slice(3)}</h2>\r\n        <div className=\"buttons\">\r\n          <i className=\"fas fa-user-plus\"></i>\r\n          <i onClick={() => setCallStatus({type: 'startCall', user: selectedUser})} className=\"fas fa-phone\"></i>\r\n        </div>\r\n      </div>\r\n\t\t\t<div ref={messageBox} className='messages-wrap'>\r\n\t\t\t\t<MessageBox messages={messages} user={currentUser}></MessageBox>\r\n\t\t\t</div>\r\n\t\t\t<div className='input'>\r\n\t\t\t\t<form autoComplete='off' onSubmit={sendData}>\r\n\t\t\t\t\t<input name='message' ref={inputRef} value={input} placeholder='Type something...' onChange={inputHendler} type='text'></input>\r\n\t\t\t\t\t<button type='submit'>Send</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n      {spinner && <Spinner/>}\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport './modal.scss';\r\n\r\nexport function Modal({user, reject, accept, className}) {\r\n  return (\r\n    <div className={`modal-frame ${className}`}>\r\n      <h2>Incoming call from {user}</h2>\r\n      <div className='modal-controls'>\r\n        <i onClick={reject} className=\"fas fa-phone-slash\"></i>\r\n        <i onClick={accept} className=\"fas fa-phone\"></i>\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n","import React, {useEffect, useContext, useState} from 'react';\r\nimport { Modal } from '../ModalNew/Modal';\r\nimport Peer from 'peerjs';\r\nimport './videochat.scss';\r\nconst config = {\r\n  host: 'localhost',\r\n  port: 9000,\r\n  path: '/lis-chat'\r\n};\r\n\r\nexport function VideoChat({callNumber, myNumber, callStatus, setCallStatus}) {\r\n  const [callState, setCallState] = useState({});\r\n  const [peerState, setPeerState] = useState({});\r\n  const [remoteStream, setRemoteStream] = useState(null);\r\n  const [connection, setConnection] = useState({});\r\n\r\n  useEffect(()=>{\r\n    let peer;\r\n\r\n    if(myNumber){\r\n      peer = new Peer(myNumber, config);\r\n      setPeerState({peer})\r\n    }\r\n\r\n    if(peer) {\r\n      peer.on('call', async (call) => {\r\n        const userMedia = await navigator.mediaDevices.getUserMedia({video: true, audio: true});\r\n        call.answer(userMedia);\r\n        callListner(call);\r\n      })\r\n\r\n      peer.on('connection', (conn) => {\r\n        conn.on('data', (data) => {\r\n          if(data.type === 'endCall') {\r\n            setCallState({});\r\n            return;\r\n          }\r\n          setCallState({type:'incomingRequest', data: data.data});\r\n          setConnection(conn);\r\n        })\r\n      })\r\n    }\r\n  }, [myNumber]);\r\n\r\n  useEffect(()=>{\r\n    if(callStatus.type === 'startCall') {\r\n      const conn = peerState.peer.connect(callNumber);\r\n      conn.on('open', ()=>{\r\n        conn.send({type: 'request', data: myNumber});\r\n      })\r\n\r\n      conn.on('data', (data)=>{\r\n        if(data.type === 'rejected') {\r\n          setCallState({});\r\n          setCallStatus({type: 'ended'});\r\n        }\r\n      })\r\n      setConnection(conn);\r\n    }\r\n  }, [callStatus.type])\r\n\r\n\r\n  async function call() {\r\n    const callNumber = callState.data;\r\n    const userMedia = await navigator.mediaDevices.getUserMedia({video: true, audio: true});\r\n    const call = peerState.peer.call(callNumber, userMedia);\r\n    callListner(call);\r\n  }\r\n\r\n  function callListner(call) {\r\n    let localStream;\r\n    call.on('stream', (rStream) => {\r\n      setCallStatus({type: 'started'});\r\n      localStream = call.localStream;\r\n      setRemoteStream(rStream)\r\n    });\r\n\r\n    call.on('close', () => {\r\n      localStream.getTracks().forEach(element => {\r\n        element.stop();\r\n      });\r\n      setCallState({});\r\n    })\r\n    setCallState({type: 'call', call: call});\r\n  }\r\n\r\n  function endCall() {\r\n    if(callState.call) {\r\n      callState.call.close();\r\n    } else {\r\n      setCallState({});\r\n      setCallStatus({type: 'ended'});\r\n      connection.send({type: 'endCall'})\r\n    }\r\n  }\r\n\r\n  function reject() {\r\n    connection.send({type: 'rejected'});\r\n    setCallStatus({type: 'ended'});\r\n    setCallState({});\r\n  }\r\n\r\n  // if(callState?.type === 'call' || callStatus.type === 'startCall') {\r\n    return (\r\n      <>\r\n        <Modal className={callState?.type === 'incomingRequest' ? 'show':'hide'} reject={reject} accept={call}></Modal>\r\n        <div className={`video-chat ${callState?.type === 'call' || callStatus.type === 'startCall' ? 'video-active' : 'video-hide'}`}>\r\n          {callStatus.type === 'startCall' && <><div className='animate'/><div className='started-calling'>{callStatus.user.username.slice(0, 2)}</div></>}\r\n          {callStatus.type !== 'startCall' && <video autoPlay ref={(video) => video && remoteStream ? video.srcObject = remoteStream : ''}></video>}\r\n          <div className='video-chat-controll'>\r\n            <i className=\"fas fa-microphone-alt-slash\"></i>\r\n            <i onClick={endCall} className=\"fas fa-phone-slash\"></i>\r\n          </div>\r\n        </div>\r\n      </>\r\n    )\r\n  // }\r\n\r\n  return(<Modal className={callState?.type === 'incomingRequest' ? 'show':'hide'} reject={reject} accept={call}></Modal>)\r\n}\r\n","import React, {useContext} from 'react';\r\nimport {UserInfo} from '../ChatLayout'\r\nimport './initialScreen.scss';\r\n\r\nexport function InitialScreen() {\r\n  const user = useContext(UserInfo);\r\n\r\n  return (\r\n    <div className='initial-screen'>\r\n      <h2>\r\n      {user.first_name} {user.last_name}<br/>\r\n        Welcom to my application.\r\n      </h2>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState, useEffect, useContext } from 'react'\r\nimport './userlist.scss';\r\nimport { UserInfo } from '../ChatLayout'\r\n\r\nexport const UserList = React.memo(function UserList({usersList, pageState, setSelectedUser}) {\r\n  const [users, setUsers] = useState([]);\r\n  const userInfo = useContext(UserInfo);\r\n  const [find, setFind] = useState([]);\r\n  const [filtredUsers, setFiltredUsers] = useState([]);\r\n\r\n  const findUser = (e) => {\r\n    e.persist();\r\n    setFind(e.target.value);\r\n    setFiltredUsers(() => {\r\n      return usersList.filter(item => item.login !== userInfo.login && item.first_name.includes(find) || item.last_name.includes(find))\r\n    });\r\n    if (!e.target.value) {\r\n      setFiltredUsers([]);\r\n    }\r\n  }\r\n\r\n  useEffect(()=>{\r\n    setUsers(usersList);\r\n  }, [usersList]);\r\n\r\n  function getRandom(max) {\r\n    return '#' + Math.floor(Math.random() * Math.floor(max)).toString(16);\r\n  }\r\n\r\n  function hexContrastCalc(hex) {\r\n    const red = parseInt(hex[1]+hex[2], 16);\r\n    const green = parseInt(hex[3]+hex[4], 16);\r\n    const blue = parseInt(hex[5]+hex[6], 16);\r\n    return red*0.2126 + green*0.7152 + blue*0.0722 < 126;\r\n  }\r\n\r\n  function selectUser(e) {\r\n    setSelectedUser({id: e.target.getAttribute('data-id'), username: e.target.innerText});\r\n  }\r\n\r\n  function logOut() {\r\n    localStorage.removeItem('logined');\r\n    pageState('Login');\r\n    window.location.reload();\r\n  }\r\n\r\n  function getUsersList(arr) {\r\n    return arr.map((user, index) => {\r\n      const bg = getRandom(16777214).padEnd(7, '0');\r\n      const clr = hexContrastCalc(bg);\r\n      if(user.login === userInfo.login) {\r\n        return ''\r\n      };\r\n      return <li onClick={selectUser} key={index} data-id={user.id}><span style={{background: bg, color: clr ? '#fff' : '#000'}}><div className={`status ${user.isOnline ? 'online' : 'offline'}`}></div>{user.first_name[0]}{user.last_name[0]}</span>{user.first_name} {user.last_name}</li>\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className='user-list-wrapper'>\r\n      <div className='user-info'>\r\n        <h3>{userInfo.first_name} {userInfo.last_name}</h3>\r\n        <i onClick={logOut} className=\"fas fa-sign-out-alt\"></i>\r\n      </div>\r\n      <div className=\"list-controllers\">\r\n        <button className=\"user-changer\">My Contacts</button>\r\n        <button className=\"user-changer\">All Users</button>\r\n      </div>\r\n      <input type=\"text\" value={find} onChange={findUser} className=\"find user\" placeholder=\"Start typing\"></input>\r\n      <ul className='user-list'>\r\n        {filtredUsers.length || find.length ? getUsersList(filtredUsers) : getUsersList(users)}\r\n      </ul>\r\n    </div>\r\n  )\r\n});\r\n","import React, {useEffect, useState, useContext} from 'react';\r\nimport './chatLayout.scss'\r\nimport { TextChat } from './TextChat/TextChat';\r\nimport { VideoChat } from './VideoChat/VideoChat';\r\nimport { InitialScreen } from './InitialScreen/InitialScreen';\r\nimport axios from 'axios';\r\nimport { UserList } from './UserList/UserList';\r\nimport { PageState } from './Login/Auth';\r\nimport { Modal } from './ModalNew/Modal';\r\n\r\nexport const UserInfo = React.createContext()\r\n\r\nexport default function Chat() {\r\n  const [userList, setUserList] = useState([]);\r\n  const [userInfo, setUserInfo] = useState({});\r\n  const [selectedUser, setSelectedUser] = useState(null);\r\n  const [callStatus, setCallStatus] = useState('');\r\n  const pageState = useContext(PageState);\r\n\r\n  async function offLine() {\r\n    await axios.get('http://localhost:8000/offline?st=false', {withCredentials: true});\r\n  }\r\n\r\n  async function online() {\r\n    await axios.get('http://localhost:8000/offline?st=true', {withCredentials: true});\r\n  }\r\n\r\n  useEffect(()=>{\r\n    (async ()=>{\r\n      const user = await axios.get('http://localhost:8000/users', {withCredentials: true});\r\n      const users = await axios.get('http://localhost:8000/allUsers', {withCredentials: true});\r\n      setUserList(users.data);\r\n      setUserInfo(user.data);\r\n    })();\r\n\r\n    window.addEventListener('beforeunload', offLine);\r\n    if(localStorage.getItem('logined')){\r\n      window.addEventListener('load', online);\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener('load', online);\r\n      window.removeEventListener('beforeunload', offLine);\r\n    }\r\n  }, []);\r\n\r\n\treturn (\r\n    <>\r\n    {callStatus.type === 'request' && <Modal/>}\r\n      <div className=\"chat-wrapper\">\r\n        <UserInfo.Provider value={userInfo}>\r\n          <UserList usersList={userList} pageState={pageState} setSelectedUser={setSelectedUser}/>\r\n          {!selectedUser && <InitialScreen></InitialScreen>}\r\n          {selectedUser &&<TextChat setCallStatus={setCallStatus} pageState={pageState} selectedUser={selectedUser}></TextChat>}\r\n          <VideoChat setCallStatus={setCallStatus} callStatus={callStatus} pageState={pageState} callNumber={selectedUser?.id} myNumber={userInfo.id} ></VideoChat>\r\n        </UserInfo.Provider>\r\n      </div>\r\n    </>\r\n\t);\r\n}\r\n","import React, {useState, useEffect} from 'react';\r\nimport Spinner from '../../Spinner/Spinner';\r\nimport axios from 'axios';\r\nimport './login.scss';\r\n\r\nexport function Login({setPageState}) {\r\n  const [userData, setUserData] = useState({\r\n    login: '',\r\n    password: ''\r\n  });\r\n\r\n  const [spinner, setSpinner] = useState(false);\r\n\r\n  async function submit(e) {\r\n    e.preventDefault();\r\n\r\n    if(!userData.login || !userData.password){\r\n      return;\r\n    }\r\n\r\n    setSpinner(true);\r\n    const response = await axios.post('http://localhost:8000/auth', userData, {withCredentials: true});\r\n    if(response.status === 200) {\r\n      localStorage.setItem('logined', true);\r\n      setPageState('Logined');\r\n    }\r\n    setSpinner(false);\r\n  }\r\n\r\n  function changeHandler(e) {\r\n    e.persist();\r\n    setUserData(data => ({...data, [e.target.name]: e.target?.value}));\r\n  }\r\n\r\n  return (\r\n    <div className='login-wrap'>\r\n      <div>\r\n        <form className='user-connection' onSubmit={submit}>\r\n        {spinner && <Spinner></Spinner>}\r\n          <h2 className=\"form-signin-heading\">Sign in</h2>\r\n          <label htmlFor='login'>Login</label>\r\n          <input id='login' placeholder=\"login\" type=\"text\" name='login' value={userData.login} onChange={changeHandler}/>\r\n          <label htmlFor='login'>Passowrd</label>\r\n          <input type=\"password\" id='password' className=\"form-control\" name=\"password\" placeholder=\"password\" value={userData.password} onChange={changeHandler}/>\r\n          <input className=\"submitButton\" type=\"submit\" value='Login'/>\r\n          <h2>Don't have an account?</h2>\r\n          <button onClick={() => setPageState('Reg')} className='reg_btn'>Create an account</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, {useState} from 'react';\r\nimport Spinner from '../../Spinner/Spinner';\r\nimport axios from 'axios';\r\nimport './login.scss';\r\n\r\nexport function SignUp({setPageState}) {\r\n  const [userData, setUserData] = useState({\r\n    login: '',\r\n    password: '',\r\n    confPassword: '',\r\n    email: '',\r\n  });\r\n\r\n  const [spinner, setSpinner] = useState(false);\r\n\r\n  async function submit(e) {\r\n    e.preventDefault();\r\n\r\n    if(!userData.login || !userData.password){\r\n      return;\r\n    }\r\n\r\n    setSpinner(true);\r\n    try {\r\n      const resp = await axios.post('http://localhost:8000/register', userData);\r\n      console.log(resp);\r\n    }\r\n    catch (err) {\r\n      setSpinner(false);\r\n    }\r\n    setSpinner(false);\r\n    setPageState('Login');\r\n  }\r\n\r\n  function changeHandler(e) {\r\n    e.persist();\r\n    setUserData(data => ({...data, [e.target.name]: e.target?.value}));\r\n  }\r\n\r\n  return (\r\n    <div className='login-wrap'>\r\n      <div>\r\n        <form className='user-connection' onSubmit={submit}>\r\n        {spinner && <Spinner></Spinner>}\r\n          <h2 className=\"form-signin-heading\">Sign up</h2>\r\n          <label htmlFor='login'>Login</label>\r\n          <input id='login' placeholder=\"login\" type=\"text\" name='login' value={userData.login} onChange={changeHandler}/>\r\n          <label htmlFor='login'>Passowrd</label>\r\n          <input type=\"password\" autoComplete=\"off\" id='password' className=\"form-control\" name=\"password\" placeholder=\"password\" value={userData.password} onChange={changeHandler}/>\r\n          <label htmlFor='confPassword'>Confirm Passowrd</label>\r\n          <input id='confPassword' autoComplete=\"off\" placeholder=\"Password\" type=\"password\" name='confPassword' value={userData.confPassword} onChange={changeHandler}/>\r\n          <label htmlFor='login'>Email (optional)</label>\r\n          <input id='email' placeholder=\"email\" type=\"mail\" name='email' value={userData.email} onChange={changeHandler}/>\r\n          <label htmlFor='login'>First Name</label>\r\n          <input id='first_name' placeholder=\"first_name\" type=\"text\" name='first_name' value={userData.first_name} onChange={changeHandler}/>\r\n          <label htmlFor='login'>Last Name</label>\r\n          <input id='last_name' placeholder=\"last_name\" type=\"mail\" name='last_name' value={userData.last_name} onChange={changeHandler}/>\r\n          <input className=\"submitButton\" type=\"submit\" value='Start!'/>\r\n          <h2>Do have an account?</h2>\r\n          <button onClick={() => setPageState('Login')} className='reg_btn'>Sign In</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, {useEffect, useState, Suspense, useContext} from 'react';\r\nimport ChatLayout from '../ChatLayout';\r\nimport { Login } from './components/Login.js'\r\nimport { SignUp } from './components/Signup.js'\r\nimport Spinner from '../Spinner/Spinner';\r\n\r\nexport const PageState = React.createContext()\r\n\r\nexport default function Chat() {\r\n  const [pageState, setPageState] = useState('Login');\r\n\r\n  if(!localStorage.getItem('logined')) {\r\n    if(pageState === 'Login') return <Login setPageState={setPageState} />\r\n    if(pageState === 'Reg') return <SignUp setPageState={setPageState} />\r\n  }\r\n\r\n\treturn (\r\n\t\t<Suspense fallback={<div className='spinner-main'><Spinner></Spinner></div>}>\r\n      <PageState.Provider value={setPageState}>\r\n\t\t\t  <ChatLayout user={pageState.users}></ChatLayout>\r\n      </PageState.Provider>\r\n\t\t</Suspense>\r\n\t);\r\n}\r\n"],"sourceRoot":""}