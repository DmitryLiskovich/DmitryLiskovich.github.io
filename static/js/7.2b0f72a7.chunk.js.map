{"version":3,"sources":["../node_modules/peerjs/dist sync","components/VideoChat/TextChat.js","components/VideoChat/Modal/Modal.js","components/VideoChat/Video.js","components/VideoChat/Chat.js","components/VideoChat/Spinner/Spinner.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","TextChat","props","_useState","useState","_useState2","Object","slicedToArray","messages","setMessage","_useState3","state","name","_useState4","isTyping","setIsTyping","selectedUser","socket","input","wrap","useRef","button","useEffect","current","scrollTop","scrollHeight","on","data","type","message","concat","toConsumableArray","react_default","a","createElement","className","ref","map","item","index","my","key","onSubmit","preventDefault","emit","target","value","focus","placeholder","onInput","onChange","Modal","streamCache","callingUser","path","callOptions","config","iceServers","url","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","setInterval","axios","get","pathHistory","Chat","catchIt","calling","chatState","peer","Peer","localStream","peercall","rejected","setState","videoStream","setVideoStream","_useState5","_useState6","setSelectedUser","video","draw","user","_useState7","_useState8","peers","setPeers","callAnswer","currentTarget","parentElement","getAttribute","connect","objectSpread2","setTimeout","audio","stream","call","remoteStream","setRemoteStream","getTracks","forEach","track","stop","error","send","streamRemote","getAudioTracks","enabled","srcObject","reject","confirm","alert","onMouseDrag","event","layerX","add","layerY","onMouseUp","simplify","selected","removeEventListener","peerID","_ref","asyncToGenerator","regenerator_default","mark","_callee","_context","prev","next","_x","apply","this","arguments","answer","close","paper","setup","addEventListener","console","log","remove","Path","strokeColor","push","Modal_Modal","onClick","tagName","listTarget","userConnection","data-name","data-number","slice","Fragment","muted","autoPlay","active","currentVideoEl","VideoChat_TextChat","Spinner","setUser","userState","setUserState","spinner","setSpinner","document","title","room","Spinner_Spinner","required","io"],"mappings":"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","file":"static/js/7.2b0f72a7.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 163;","import React, {useState, useRef, useEffect} from 'react';\r\nimport './TextChat.scss';\r\n\r\nfunction TextChat(props) {\r\n\tconst [messages, setMessage] = useState([]);\r\n  const [isTyping, setIsTyping] = useState({state: false, name: null});\r\n  const selectedUser = props.selectedUser;\r\n  const socket = props.socket;\r\n\tlet input = '';\r\n\t// localStorage.setItem('messages', JSON.stringify(messages));\r\n\tconst wrap = useRef(null);\r\n\tconst button = useRef(null);\r\n\r\n\tuseEffect(() => {\r\n\t\tif(wrap.current){\r\n\t\t\twrap.current.scrollTop = wrap.current.scrollHeight;\r\n\t\t}\r\n\t}, [messages]);\r\n  \r\n  useEffect(() => {\r\n\t\tsocket.on('message-from', (data)=>{\r\n\t\t\tif(data.type === 'typing'){\r\n\t\t\t\tsetIsTyping({state: true, name: data.message});\r\n\t\t\t}else if(data.type === 'connect'){\r\n\t\t\t\tsetMessage((messages) => [...messages, {message: data.message, id: null}]);\r\n\t\t\t}else if(data.type === 'typing-end'){\r\n\t\t\t\tsetIsTyping({state: false, name: null});\r\n\t\t\t}else{\r\n\t\t\t\tsetMessage((messages) => [...messages, {message: data.input, id: data.id}]);\r\n\t\t\t}\r\n\t\t});\r\n\t}, []);\r\n\r\n\tfunction sendData(e){\r\n\t\te.preventDefault();\r\n\t\tsocket.emit('message-from', {input: input, id: selectedUser});\r\n\t\tsetMessage([...messages, {message: input, id: `You`}]);\r\n\t\te.target.message.value = '';\r\n\t\tbutton.current.focus();\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"TextChat\">\r\n\t\t\t<div ref={wrap} className='messages-wrap'>\r\n\t\t\t\t{messages.map((item, index)=>{\r\n\t\t\t\t\tconst my = item.id === 'You';\r\n\t\t\t\t\tif(!item.id){\r\n\t\t\t\t\t\treturn(\r\n\t\t\t\t\t\t\t<div key={index} className={`message-connect`}>\r\n\t\t\t\t\t\t\t\t<p>{item.message}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn(\r\n\t\t\t\t\t\t<div key={index} className={`message ${my && 'my_message'}`}>\r\n\t\t\t\t\t\t\t<p>{item.message}</p>\r\n\t\t\t\t\t\t\t<p className='id'>{item.id}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className='input'>\r\n\t\t\t\t<form onSubmit={sendData}>\r\n\t\t\t\t\t<input ref={button} name='message' placeholder={isTyping.state ? isTyping.name : 'message'} onInput={()=>socket.emit('typing...')} onChange={(e)=> {input=e.target.value;}} type='text'></input>\r\n\t\t\t\t\t<button type='submit'>Send</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default TextChat;","import React from 'react';\r\nimport './Modal.scss';\r\n\r\nexport default function Modal(props){\r\n\tconst message = props.message;\r\n  return(\r\n    <div className='modal-wrap'>\r\n      <div className='modal'>\r\n        <h2>{message}</h2>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React, {useRef, useEffect, useState} from 'react';\r\nimport Peer from 'peerjs';\r\nimport axios from 'axios';\r\nimport paper, {Path} from 'paper/dist/paper-core';\r\nimport './myChat.scss'\r\nimport TextChat from './TextChat';\r\nimport Modal from './Modal/Modal';\r\n\r\nconst callOptions={config: {'iceServers': [\r\n\t{ url: 'stun:stun.l.google.com:19302' },\r\n]}\r\n};\r\n\r\nnavigator.getUserMedia = ( navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia);\r\n\r\nfunction wakeUp(){\r\n\taxios.get('https://rocky-reef-68087.herokuapp.com/email');\r\n\t// axios.get('http://localhost:8080/email');\r\n}\r\nlet streamCache;\r\nlet callingUser;\r\nsetInterval(wakeUp, 300000);\r\nlet message;\r\nlet path;\r\nconst pathHistory = [];\r\n\r\nexport default function Chat(props) {\r\n\tconst [state, setState] = useState({catchIt: false, calling: false, chatState: false, peer: new Peer(callOptions), localStream: null, peercall: null, rejected: false});\r\n\tconst [videoStream, setVideoStream] = useState([]);\r\n\tconst [selectedUser, setSelectedUser] = useState();\r\n\tconst video = useRef(null);\r\n\tconst draw = useRef(null);\r\n\tconst name = props.user.name;\r\n\tconst socket = props.socket;\r\n\tconst [peers, setPeers] = useState({});\r\n\r\n\tuseEffect(()=>{\r\n\r\n\t\tstate.peer.on('open', function(peerID) {\r\n\t\t\tsocket.send(peerID);\r\n\t\t});\r\n\r\n\t\tstate.peer.on('connection', (user)=>{\r\n\t\t\tuser.on('data', (data)=>{\r\n\t\t\t\tsetState((state)=> ({...state, catchIt: true, peercall: user}));\r\n\t\t\t});\r\n\t\t\tsetState((state)=> ({...state, peercall: user}));\r\n\t\t})\r\n\r\n\t\tsocket.on('message', async (data)=>{\r\n\t\t\tdelete data[name];\r\n\t\t\tsetPeers(data);\r\n\t\t})\r\n\r\n\t\tstate.peer.on('call', function(call) {\r\n\t\t\tif(navigator.getUserMedia){\r\n\t\t\t\tnavigator.getUserMedia({video: true, audio: false}, (stream)=>{\r\n\t\t\t\t\tcall.answer(stream);\r\n\t\t\t\t\tcallingUser = call.peer;\r\n\t\t\t\t\tcall.on('close', (e)=>{\r\n\t\t\t\t\t\tstream.getTracks().forEach(track => track.stop());\r\n\t\t\t\t\t\tsetState((state)=> ({...state, calling: false}));\r\n\t\t\t\t\t})\r\n\t\t\t\t\tcall.on('stream', (remoteStream)=> setRemoteStream(remoteStream, stream))\r\n\t\t\t\t\tsetState((state)=> ({...state, catchIt: false, calling: true, peercall: call}))\r\n\t\t\t\t}, error);\r\n\t\t\t}else{\r\n\t\t\t\tcall.close();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tpaper.setup(draw.current);\r\n\r\n\t\tdraw.current.addEventListener('mousedown', onMouseDown);\r\n\r\n\t\tfunction onMouseDown(event) {\r\n\t\t\tif (path) {\r\n\t\t\t\tpath.selected = false;\r\n\t\t\t}\r\n\r\n\t\t\tconsole.log(pathHistory);\r\n\r\n\t\t\tif(event.button === 2 && path){\r\n\t\t\t\tpathHistory.forEach(item=> item.remove());\r\n\t\t\t}\r\n\r\n\t\t\r\n\t\t\tpath = new Path({\r\n\t\t\t\tstrokeColor: '#152238',\r\n\t\t\t\tselected: true\r\n\t\t\t});\r\n\r\n\t\t\tpathHistory.push(path);\r\n\r\n\t\t\tdraw.current.addEventListener('mousemove', onMouseDrag);\r\n\t\t\tdraw.current.addEventListener('mouseup', onMouseUp);\r\n\t\t}\r\n\t\t\r\n\t\tfunction onMouseDrag(event) {\r\n\t\t\tif(path && event.layerX > 0){\r\n\t\t\t\tpath.add(event.layerX, event.layerY);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction onMouseUp(event) {\r\n\t\t\tif(path){\r\n\t\t\t\tpath.simplify();\r\n\t\t\t\tpath.selected = false;\r\n\t\t\t}\r\n\t\t\tdraw.current.removeEventListener('mousemove', onMouseDrag);\r\n\t\t\tdraw.current.removeEventListener('mouseup', onMouseUp);\r\n\t\t}\r\n}, []);\r\n\r\nuseEffect(()=>{\r\n\tif(selectedUser){\r\n\t\tsetState((state)=> ({...state, chatState: true}));\r\n\t}else{\r\n\t\tsetState((state)=> ({...state, chatState: false}));\r\n\t}\r\n}, [selectedUser]);\r\n\r\n\tfunction callAnswer(e){\r\n\t\tcallingUser = e.currentTarget.parentElement.parentElement.getAttribute('data-number');\r\n\t\tconst connect = state.peer.connect(callingUser);\r\n\t\tconnect.on('open', ()=>{\r\n\t\t\tconnect.on('data', (data)=>{\r\n\t\t\t\tif(data !== 'rejected'){\r\n\t\t\t\t\tif(navigator.getUserMedia){\r\n\t\t\t\t\t\tnavigator.getUserMedia({video: true, audio: false}, (stream)=>{\r\n\t\t\t\t\t\t\tlet peer = state.peer.call(callingUser, stream);\r\n\t\t\t\t\t\t\tpeer.on('stream', (remoteStream)=> setRemoteStream(remoteStream, stream))\r\n\t\t\t\t\t\t\tpeer.on('close', (e)=>{\r\n\t\t\t\t\t\t\t\tstream.getTracks().forEach(track => track.stop());\r\n\t\t\t\t\t\t\t\tsetState((state)=> ({...state, calling: false}));\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tsetState((state)=> ({...state, calling: true, peercall: peer}));\r\n\t\t\t\t\t\t}, error);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tmessage = \"You don't have web camera or you have http connection\";\r\n\t\t\t\t\t\tsetState((state)=> ({...state, rejected: true}))\r\n\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\tsetState((state)=> ({...state, rejected: false}))\r\n\t\t\t\t\t\t}, 5000);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(data === 'rejected'){\r\n\t\t\t\t\tmessage = 'Your call has been rejected';\r\n\t\t\t\t\tsetState((state)=> ({...state, rejected: true}))\r\n\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\tsetState((state)=> ({...state, rejected: false}))\r\n\t\t\t\t\t}, 5000);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconnect.send('request')\r\n\t\t});\r\n\r\n\t}\r\n\tfunction setRemoteStream(streamRemote, stream){\r\n\t\tstream.getAudioTracks().enabled = false;\r\n\t\tvideo.current.srcObject = stream;\r\n\t\tif(streamRemote !== streamCache){\r\n\t\t\tsetVideoStream((state)=> ([...state, streamRemote]));\r\n\t\t\tstreamCache = streamRemote;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction reject(){\r\n\t\tstate.peercall.send('rejected');\r\n\t\tsetState((state)=> ({...state, calling: false, catchIt: false, peercall: null}));\r\n\t}\r\n\r\n\tfunction confirm(){\r\n\t\tstate.peercall.send('accepted');\r\n\t\tsetState((state)=> ({...state, calling: false, catchIt: false, peercall: null}));\r\n\t}\r\n\r\n\tfunction error(e){\r\n\t\talert(`Ошибка: ${e}`)\r\n\t}\r\n\r\n\tfunction checkUserToCall(e){\r\n\t\tif(e.target.tagName !== 'UL' && e.target.className !== 'calling' && e.target.tagName !== 'I' && e.target.className !== 'calling pulse-button'){\r\n\t\t\tlet listTarget = e.target;\r\n\t\t\twhile(!listTarget.getAttribute('data-name')){\r\n\t\t\t\tlistTarget = listTarget.parentElement;\r\n\t\t\t}\r\n\t\t\tconst userConnection = {};\r\n\t\t\tuserConnection[listTarget.getAttribute('data-name')] = listTarget.getAttribute('data-number');\r\n\t\t\tsetSelectedUser(userConnection);\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"App\">\r\n\t\t\t<canvas id='draw' ref={draw}></canvas>\r\n\t\t\t{state.rejected && <Modal message={message}></Modal>}\r\n\t\t\t<div className={`users-list ${state.calling || state.chatState ? 'hidden' : ''}`}>\r\n\t\t\t\t<ul onClick={checkUserToCall}>\r\n\t\t\t\t\t<li className='header'><h1>Users List</h1><i className=\"far fa-comments chat-change\" onClick={()=>setState({...state, chatState: true})}></i></li>\r\n\t\t\t\t\t{Object.keys(peers).map((item, index)=> {\r\n\t\t\t\t\t\treturn(\r\n\t\t\t\t\t\t\t<li data-name={item} className={`${selectedUser && selectedUser[item] && 'active'}`} data-number={peers[item]} key={index}><div className='user-name'>{item.slice(0, 2)}</div><p>{item}</p><div className=\"button\">\r\n\t\t\t\t\t\t\t\t\t<div onClick={state.catchIt ? confirm : callAnswer} className={`calling ${state.catchIt && state.peercall.peer === peers[item] ? 'pulse-button' : ''}`}>\r\n\t\t\t\t\t\t\t\t\t\t<i className=\"fas fa-phone\"></i>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t{state.catchIt && state.peercall.peer === peers[item] && (<div onClick={reject} className={`reject calling`}>\r\n\t\t\t\t\t\t\t\t\t\t<i className=\"fas fa-phone-slash\"></i>\r\n\t\t\t\t\t\t\t\t\t</div>)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t)})\r\n\t\t\t\t\t}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t{state.calling &&\r\n\t\t\t\t<div className={`video-chat ${!state.calling && 'hidden'}`}>\r\n\t\t\t\t\t<Video></Video> \r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t{!state.calling &&\r\n\t\t\t<>\r\n\t\t\t\t<i onClick={()=>setState((state)=> ({...state, chatState: false}))} className={`fas fa-times close-button ${!state.chatState ? 'hidden' : ''}`}></i>\r\n\t\t\t\t<div className={`text-chat ${!state.chatState && 'hidden'}`}>\r\n\t\t\t\t\t<TextChat selectedUser={name} socket={socket}></TextChat>\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t\t}\r\n\t\t</div>\r\n\t);\r\n\r\n\tfunction Video(){\r\n\t\treturn(\r\n\t\t\t<>\r\n\t\t\t\t<div className=\"chat-section\">\r\n\t\t\t\t\t<div className='chat-wrap'>\r\n\t\t\t\t\t\t<div className='my_wrapp'>\r\n\t\t\t\t\t\t\t<video muted className='my' ref={video} autoPlay></video>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='chat'>\r\n\t\t\t\t\t\t\t{videoStream.map((item, index)=> (item.active ? <video className=\"video\" autoPlay key={index} ref={currentVideoEl => currentVideoEl ? currentVideoEl.srcObject = item : ''}></video> : ''))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='button-section'>\r\n\t\t\t\t\t\t\t<div onClick={()=> state.peercall ? state.peercall.close() : state.peer.close()} className=\"reject calling\"><i className=\"fas fa-phone-slash\"></i></div>\r\n\t\t\t\t\t\t\t<i className=\"fas fa-microphone\"></i>\r\n\t\t\t\t\t\t\t<i className=\"fas fa-volume-up\"></i>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n}","import React, {useEffect, useState} from 'react';\r\nimport Video from './Video';\r\nimport io from 'socket.io-client';\r\nimport './login.scss'\r\nimport Spinner from './Spinner/Spinner';\r\n\r\nlet socket;\r\n\r\n\tsocket = io.connect('https://rocky-reef-68087.herokuapp.com');\r\n// if(window.location.origin === \"https://dmitryliskovich.github.io\"){\r\n// \tsocket = io.connect('https://rocky-reef-68087.herokuapp.com');\r\n// }else{\r\n// \tsocket = io.connect('http://localhost:8080');\r\n// }\r\n\r\n\r\nexport default function Chat() {\r\n\tconst [state, setState] = useState(false);\r\n\tconst [user, setUser] = useState({});\r\n\tconst [userState, setUserState] = useState(true);\r\n\tconst [spinner, setSpinner] = useState(true);\r\n\r\n\tfunction submit(e){\r\n\t\tsetSpinner(false);\r\n\t\te.preventDefault();\r\n\t\tsetUser({name: e.target.name.value, room: e.target.room.value})\r\n\t\tsocket.emit('join', e.target.room.value, e.target.name.value);\r\n\t}\r\n\r\n\tuseEffect(()=>{\r\n\t\tdocument.title = 'Chat';\r\n\t\tsocket.on('message', (data)=>{\r\n\t\t\tif(data.type === 'err'){\r\n\t\t\t\tsetState(false);\r\n\t\t\t\tsetUserState(false);\r\n\t\t\t} else{\r\n\t\t\t\tsetSpinner(true);\r\n\t\t\t\tsetState(true);\r\n\t\t\t}\r\n\t\t})\r\n\t}, [])\r\n\r\n\tif(!state){\r\n\t\treturn(\r\n\t\t\t<div className='login-wrap'>\r\n\t\t\t\t<form className='user-connection' onSubmit={submit}>\r\n\t\t\t\t{!spinner && <Spinner></Spinner>}\r\n\t\t\t\t\t<h2 className=\"form-signin-heading\">Please select room and enter your nickname</h2>\r\n\t\t\t\t\t{/* <input type='' className=\"form-control\" name=\"room\" placeholder=\"ROOM\" required /> */}\r\n\t\t\t\t\t<select type='' className=\"form-control\" name=\"room\" required>\r\n\t\t\t\t\t\t<option>First room</option>\r\n\t\t\t\t\t\t<option>Second room</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t\t<input type=\"text\" className=\"form-control\" name=\"name\" placeholder=\"USER NAME\" required/>      \r\n\t\t\t\t\t{!userState && <div className='alert'>User already in this room</div>}\r\n\t\t\t\t\t<input className=\"submitButton\" type=\"submit\" value='Enter'></input>   \r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Video socket={socket} user={user}></Video>\r\n\t);\r\n}","import React from 'react';\r\nimport './Spinner.scss';\r\n\r\nexport default function Spinner(){\r\n  return(\r\n    <div className=\"lds-dual-ring\"></div>\r\n  )\r\n}"],"sourceRoot":""}