{"version":3,"sources":["../node_modules/peerjs/dist sync","components/VideoChat/TextChat/TextChat.js","components/VideoChat/Modal/Modal.js","components/VideoChat/DrawDesk/DrawDesk.js","components/VideoChat/VideoComponent/Video.js","components/VideoChat/Chat.js","components/VideoChat/Login/ChatLoginForm.js","components/VideoChat/Spinner/Spinner.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","TextChat","props","_useState","useState","_useState2","Object","slicedToArray","messages","setMessage","_useState3","state","name","_useState4","isTyping","setIsTyping","selectedUser","socket","input","wrap","useRef","button","useEffect","current","scrollTop","scrollHeight","on","data","type","message","concat","toConsumableArray","react_default","a","createElement","className","ref","map","item","index","my","key","onSubmit","preventDefault","emit","target","value","focus","placeholder","onInput","onChange","Modal","path","DrawDesk","pathHistory","setPathHistory","_props$drawing","drawing","setState","strokeWidthState","setStrokeWidth","draw","strokeWidth","onMouseDown","event","selected","forEach","remove","Path","strokeColor","eventType","addEventListener","onMouseDrag","onMouseUp","layerX","add","layerY","targetTouches","pageX","pageY","simplify","removeEventListener","paper","setup","objectSpread2","onClick","tagName","getAttribute","parentElement","newPaths","splice","history","data-index","min","max","Video","stateFull","streams","myVideoStream","peers","_stateFull","_shareScreen","asyncToGenerator","regenerator_default","mark","_callee","stream","_context","prev","next","navigator","mediaDevices","getDisplayMedia","sent","srcObject","peer","call","callId","sharingStream","stop","apply","this","arguments","Fragment","autoPlay","active","width","currentVideoEl","peercall","close","streamCache","callingUser","userCalling","sharingUser","callOptions","config","iceServers","url","Chat","user","catchIt","calling","chatState","Peer","localStream","rejected","videoStream","setVideoStream","video","_useState5","_useState6","setPeers","createConnection","_x","_x2","_x3","_createConnection","peerCall","getUserMedia","audio","answer","remoteStream","setRemoteStream","getTracks","track","length","errConnectionMessage","errMessage","setTimeout","currentTarget","connect","send","streamRemote","getAudioTracks","enabled","newStream","reject","confirm","peerID","filter","userName","Modal_Modal","data-name","data-number","slice","VideoChat_TextChat_TextChat","setInterval","axios","get","Spinner","spinner","loggined","userIsCreated","users","document","title","react","fallback","Spinner_Spinner","room","required","io"],"mappings":"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","file":"static/js/7.0ae4557c.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 163;","import React, {useState, useRef, useEffect} from 'react';\r\nimport './TextChat.scss';\r\n\r\nfunction TextChat(props) {\r\n\tconst [messages, setMessage] = useState([]);\r\n  const [isTyping, setIsTyping] = useState({state: false, name: null});\r\n  const selectedUser = props.selectedUser;\r\n  const socket = props.socket;\r\n\tlet input = '';\r\n\t// localStorage.setItem('messages', JSON.stringify(messages));\r\n\tconst wrap = useRef(null);\r\n\tconst button = useRef(null);\r\n\r\n\tuseEffect(() => {\r\n\t\tif(wrap.current){\r\n\t\t\twrap.current.scrollTop = wrap.current.scrollHeight;\r\n\t\t}\r\n\t}, [messages]);\r\n  \r\n  useEffect(() => {\r\n\t\tsocket.on('message-from', (data)=>{\r\n\t\t\tif(data.type === 'typing'){\r\n\t\t\t\tsetIsTyping({state: true, name: data.message});\r\n\t\t\t}else if(data.type === 'connect'){\r\n\t\t\t\tsetMessage((messages) => [...messages, {message: data.message, id: null}]);\r\n\t\t\t}else if(data.type === 'typing-end'){\r\n\t\t\t\tsetIsTyping({state: false, name: null});\r\n\t\t\t}else{\r\n\t\t\t\tsetMessage((messages) => [...messages, {message: data.input, id: data.id}]);\r\n\t\t\t}\r\n\t\t});\r\n\t}, []);\r\n\r\n\tfunction sendData(e){\r\n\t\te.preventDefault();\r\n\t\tsocket.emit('message-from', {input: input, id: selectedUser});\r\n\t\tsetMessage([...messages, {message: input, id: `You`}]);\r\n\t\te.target.message.value = '';\r\n\t\tbutton.current.focus();\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"TextChat\">\r\n\t\t\t<div ref={wrap} className='messages-wrap'>\r\n\t\t\t\t{messages.map((item, index)=>{\r\n\t\t\t\t\tconst my = item.id === 'You';\r\n\t\t\t\t\tif(!item.id){\r\n\t\t\t\t\t\treturn(\r\n\t\t\t\t\t\t\t<div key={index} className={`message-connect`}>\r\n\t\t\t\t\t\t\t\t<p>{item.message}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn(\r\n\t\t\t\t\t\t<div key={index} className={`message ${my && 'my_message'}`}>\r\n\t\t\t\t\t\t\t<p>{item.message}</p>\r\n\t\t\t\t\t\t\t<p className='id'>{item.id}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<div className='input'>\r\n\t\t\t\t<form onSubmit={sendData}>\r\n\t\t\t\t\t<input ref={button} name='message' placeholder={isTyping.state ? isTyping.name : 'message'} onInput={()=>socket.emit('typing...')} onChange={(e)=> {input=e.target.value;}} type='text'></input>\r\n\t\t\t\t\t<button type='submit'>Send</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default TextChat;","import React from 'react';\r\nimport './Modal.scss';\r\n\r\nexport default function Modal(props){\r\n\tconst message = props.message;\r\n  return(\r\n    <div className='modal-wrap'>\r\n      <div className='modal'>\r\n        <h2>{message}</h2>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React, {useState, useEffect, useRef} from 'react';\r\nimport paper, {Path} from 'paper/dist/paper-core';\r\nimport './drawdesk.scss';\r\nlet path;\r\n\r\nexport default function DrawDesk(props){\r\n\tconst [pathHistory, setPathHistory] = useState([]);\r\n\tconst [state, setState] = props.drawing;\r\n\tconst [strokeWidthState, setStrokeWidth] = useState();\r\n\tconst draw = useRef(null);\r\n\tconst strokeWidth = useRef(null);\r\n\r\n\tuseEffect(()=>{\r\n\t\tpaper.setup(draw.current);\r\n\t\t['mousedown', 'touchstart'].forEach((eventType) => draw.current.addEventListener(eventType, onMouseDown));\r\n\r\n\t\tfunction onMouseDown(event) {\r\n\t\t\tif (path) {\r\n\t\t\t\tpath.selected = false;\r\n\t\t\t}\r\n\r\n\t\t\tif(event.button === 2 && path){\r\n\t\t\t\tpathHistory.forEach(item=> item.remove());\r\n\t\t\t\tsetPathHistory([]);\r\n\t\t\t}\r\n\r\n\t\t\tpath = new Path({\r\n\t\t\t\tstrokeColor: '#152238',\r\n\t\t\t\tselected: true,\r\n\t\t\t});\r\n\r\n\t\t\tsetPathHistory((state)=> ([...state, path]));\r\n\t\t\t['mousemove', 'touchmove'].forEach((eventType) => draw.current.addEventListener(eventType, onMouseDrag));\r\n\t\t\t['mouseup', 'touchend'].forEach((eventType) => draw.current.addEventListener(eventType, onMouseUp));\r\n\t\t}\r\n\t\t\r\n\t\tfunction onMouseDrag(event) {\r\n\t\t\tif(path && event.layerX && event.layerX > 0){\r\n\t\t\t\tpath.add(event.layerX, event.layerY);\r\n\t\t\t}else{\r\n\t\t\t\tpath.add(event.targetTouches[0].pageX, event.targetTouches[0].pageY - 56);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction onMouseUp() {\r\n\t\t\tif(path){\r\n\t\t\t\tpath.simplify();\r\n\t\t\t\tpath.selected = false;\r\n\t\t\t}\r\n\t\t\tdraw.current.removeEventListener('mousemove', onMouseDrag);\r\n\t\t\tdraw.current.removeEventListener('mouseup', onMouseUp);\r\n\t\t}\r\n\t\tsetState({...state, drawing: false})\r\n\r\n\t\tstrokeWidth.current.value = 1;\r\n\t}, []);\r\n\r\n\tif(path){\r\n\t\tpath.strokeWidth = strokeWidthState;\r\n\t}\r\n\r\n\tconst selectLine = (e)=>{\r\n\t\tif(e.target.tagName === 'LI'){\r\n\t\t\tpathHistory.forEach(item=> item.selected = false)\r\n\t\t\tpathHistory[+e.target.getAttribute('data-index')].selected = true;\r\n\t\t} else if(e.target.tagName === 'I'){\r\n\t\t\tpathHistory[+e.target.parentElement.getAttribute('data-index')].remove();\r\n\t\t\tconst newPaths = pathHistory;\r\n\t\t\tnewPaths.splice(+e.target.parentElement.getAttribute('data-index'), 1);\r\n\t\t\tsetPathHistory(history => [...newPaths]);\r\n\t\t}\r\n\t}\r\n\r\n\treturn(\r\n\t<div className={`chat-drawing ${state.drawing ? '' : 'hidden'}`}>\r\n\t\t<i className=\"fas fa-pencil-ruler drawing-mode\" onClick={()=>setState({...state, drawing: false})}></i>\r\n\t\t<canvas id='draw' ref={draw}></canvas>\r\n\t\t<div className='draw-tools'>\r\n\t\t\t<div>\r\n\t\t\t\t<h2>Layers</h2>\r\n\t\t\t\t<ul onClick={selectLine}>\r\n\t\t\t\t\t{pathHistory.map((item, index) => <li data-index={index} key={index}>Line - {index} <i className=\"fas fa-trash-alt\"></i></li>)}\r\n\t\t\t\t</ul>\r\n\t\t\t\t<div className='tools'>\r\n\t\t\t\t\t{strokeWidthState}\r\n\t\t\t\t\t<input onInput={(e) => setStrokeWidth(e.target.value)} ref={strokeWidth} type='range' min='1' max='100'></input>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t);\r\n}","import React from 'react';\r\nimport './video.scss';\r\n\r\nexport default function Video(props){\r\n  let {stateFull, streams, myVideoStream, peers, socket} = props;\r\n  const [state, setState] = stateFull;\r\n\r\n  async function shareScreen(){\r\n\tconst stream = await navigator.mediaDevices.getDisplayMedia();\r\n\tmyVideoStream.current.srcObject = stream;\r\n\tpeers.forEach((item)=>{\r\n\t\tstate.peer.call(item.callId ,stream);\r\n\t\tsocket.emit('share-screen-user', state.name);\r\n\t})\r\n\tsetState((state) => ({...state, sharingStream: stream}));\r\n  }\r\n\r\n  return(\r\n    <>\r\n      <div className=\"video-chat\">\r\n        <div className='video-chat__wrap'>\r\n          <div className='video-chat__wrap_my'>\r\n            <video className='my' ref={myVideoStream} autoPlay></video>\r\n          </div>\r\n          <div className='video-chat__wrap_remote'>\r\n            {streams.map((item, index)=> (item.stream.active || item.sharingStream.active ? <video className=\"video\" width='auto' autoPlay key={index} ref={currentVideoEl => currentVideoEl ? currentVideoEl.srcObject = item.sharingStream || item.stream : ''}></video> : ''))}\r\n          </div>\r\n          <div className='button-section'>\r\n            <div onClick={()=> state.peercall ? state.peercall.close() : state.peer.close()} className=\"reject calling\"><i className=\"fas fa-phone-slash\"></i></div>\r\n            <i className=\"fas fa-microphone\"></i>\r\n            <i className=\"fas fa-volume-up\"></i>\r\n\t\t\t<i onClick={shareScreen} className=\"fas fa-share-alt\"></i>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}","import React, {useRef, useEffect, useState} from 'react';\r\nimport Peer from 'peerjs';\r\nimport axios from 'axios';\r\nimport './myChat.scss'\r\nimport TextChat from './TextChat/TextChat';\r\nimport Modal from './Modal/Modal';\r\nimport DrawDesk from './DrawDesk/DrawDesk';\r\nimport Video from './VideoComponent/Video';\r\n\r\nconst callOptions={config: {'iceServers': [\r\n\t\t{ url: 'stun:stun.l.google.com:19302' },\r\n\t]}\r\n};\r\n\r\n\r\nfunction wakeUp(){\r\n\taxios.get('https://rocky-reef-68087.herokuapp.com/email');\r\n}\r\nlet streamCache;\r\nlet callingUser;\r\nsetInterval(wakeUp, 300000);\r\nlet message;\r\nlet userCalling;\r\nlet sharingUser;\r\n\r\nexport default function Chat(props) {\r\n\tconst name = props.user.name;\r\n\tconst [state, setState] = useState({\r\n\t\tdrawing: true, \r\n\t\tcatchIt: false, \r\n\t\tcalling: false, \r\n\t\tchatState: false, \r\n\t\tpeer: new Peer(callOptions), \r\n\t\tlocalStream: null,\r\n\t\tpeercall: null, \r\n\t\trejected: false,\r\n\t\tsharingStream: null,\r\n\t\tname: name,\r\n\t});\r\n\tconst [videoStream, setVideoStream] = useState([]);\r\n\tconst video = useRef(null);\r\n\tconst socket = props.socket;\r\n\tconst [peers, setPeers] = useState([]);\r\n\r\n\tuseEffect(()=>{\r\n\t\tstate.peer.on('open', function(peerID) {\r\n\t\t\tsocket.send({peerID, name});\r\n\t\t});\r\n\r\n\t\tstate.peer.on('connection', (user)=>{\r\n\t\t\tuser.on('data', (data)=>{\r\n\t\t\t\tsetState((state)=> ({...state, catchIt: true, peercall: user}));\r\n\t\t\t});\r\n\t\t\tsetState((state)=> ({...state, peercall: user}));\r\n\t\t})\r\n\r\n\t\tsocket.on('message', (data)=>{\r\n\t\t\tsetPeers(data.filter(item => item.userName !== name));\r\n\t\t})\r\n\r\n\t\tsocket.on('share-screen-user', (data)=>{\r\n\t\t\tsharingUser = data;\r\n\t\t})\r\n\r\n\t\tstate.peer.on('call', function(call) {\r\n\t\t\tif(navigator.getUserMedia){\r\n\t\t\t\tcreateConnection('answer', call, userCalling);\r\n\t\t\t}else{\r\n\t\t\t\tcall.close();\r\n\t\t\t}\r\n\t\t});\r\n\t}, []);\r\n\r\n\tasync function createConnection(type, peerCall, userCalling){\r\n\t\tconst stream = await navigator.mediaDevices.getUserMedia({video: true, audio: false});\r\n\t\tlet peer = peerCall;\r\n\t\tif(type === 'answer'){\r\n\t\t\tpeerCall.answer(stream);\r\n\t\t\tcallingUser = peerCall.peer;\r\n\t\t\tsetState((state)=> ({...state, catchIt: false, calling: true, peercall: peer}))\r\n\t\t}else{\r\n\t\t\tpeer = peer.call(callingUser, stream);\r\n\t\t\tsetState((state)=> ({...state, calling: true, peercall: peer}));\r\n\t\t}\r\n\t\tpeer.on('stream', (remoteStream)=> setRemoteStream(remoteStream, stream, userCalling))\r\n\t\tpeer.on('close', (e)=>{\r\n\t\t\tvideoStream.forEach(item => {\r\n\t\t\t\titem.stream.getTracks().forEach(track => track.stop())\r\n\t\t\t\tif(item.sharingStream){\r\n\t\t\t\t\titem.sharingStream.getTracks().forEach(track => track.stop())\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tstream.getTracks().forEach(track => track.stop());\r\n\t\t\tif(videoStream.length === 0){\r\n\t\t\t\tsetState((state)=> ({...state, calling: false}));\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfunction errConnectionMessage(errMessage){\r\n\t\tmessage = errMessage;\r\n\t\tsetState((state)=> ({...state, rejected: true}))\r\n\t\tsetTimeout(()=>{\r\n\t\t\tsetState((state)=> ({...state, rejected: false}))\r\n\t\t}, 5000);\r\n\t}\r\n\r\n\tfunction call(e){\r\n\t\tcallingUser = e.currentTarget.parentElement.parentElement.getAttribute('data-number');\r\n\t\tconst connect = state.peer.connect(callingUser);\r\n\t\tconnect.on('open', ()=>{\r\n\t\t\tconnect.on('data', (data)=>{\r\n\t\t\t\tif(data.type !== 'rejected'){\r\n\t\t\t\t\tif(navigator.getUserMedia){\r\n\t\t\t\t\t\tcreateConnection('call', state.peer, data.user);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\terrConnectionMessage(\"You don't have web camera or you have http connection\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(data.type === 'rejected'){\r\n\t\t\t\t\terrConnectionMessage(\"Your call has been rejected\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconnect.send({type: 'request', user: name});\r\n\t\t});\r\n\t}\r\n\r\n\tfunction setRemoteStream(streamRemote, stream, userCalling){\r\n\t\tstream.getAudioTracks().enabled = false;\r\n\t\tvideo.current.srcObject = stream;\r\n\t\tif(sharingUser){\r\n\t\t\tconst newStream = videoStream.map(item=>{\r\n\t\t\t\tif(sharingUser === item.user){\r\n\t\t\t\t\titem.sharingStream = streamRemote;\r\n\t\t\t\t}\r\n\t\t\t\treturn item;\r\n\t\t\t})\r\n\t\t\tsetVideoStream(newStream);\r\n\t\t}\r\n\t\tif(streamRemote !== streamCache){\r\n\t\t\tsetVideoStream((state)=> ([...state, {user: userCalling, stream: streamRemote}]));\r\n\t\t\tstreamCache = streamRemote;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction reject(){\r\n\t\tstate.peercall.send({type: 'rejected', user: name});\r\n\t\tsetState((state)=> ({...state, calling: false, catchIt: false, peercall: null}));\r\n\t}\r\n\r\n\tfunction confirm(e){\r\n\t\tuserCalling = e.currentTarget.parentElement.parentElement.getAttribute('data-name');\r\n\t\tstate.peercall.send({type: 'accepted', user: name});\r\n\t\tsetState((state)=> ({...state, calling: false, catchIt: false, peercall: null}));\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<DrawDesk drawing={[state, setState]}></DrawDesk>\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t{state.rejected && <Modal message={message}></Modal>}\r\n\t\t\t\t<div className={`users-list ${state.calling || state.chatState ? 'hidden' : ''}`}>\r\n\t\t\t\t\t<ul >\r\n\t\t\t\t\t\t<li className='header'><i className=\"fas fa-pencil-ruler drawing-mode\" onClick={()=>setState({...state, drawing: true})}></i><h1>Users List</h1><i className=\"far fa-comments chat-change\" onClick={()=>setState({...state, chatState: true})}></i></li>\r\n\t\t\t\t\t\t{peers.map((item, index)=> {\r\n\t\t\t\t\t\t\treturn(\r\n\t\t\t\t\t\t\t\t<li data-name={item.userName} data-number={item.callId} key={index}><div className='user-name'>{item.userName.slice(0, 2)}</div><p>{item.userName}</p><div className=\"button\">\r\n\t\t\t\t\t\t\t\t\t\t<div onClick={state.catchIt ? confirm : call} className={`calling ${state.catchIt && state.peercall.peer === item.callId ? 'pulse-button' : ''}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t<i className=\"fas fa-phone\"></i>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t{state.catchIt && state.peercall.peer === item.callId && (<div onClick={reject} className={`reject calling`}>\r\n\t\t\t\t\t\t\t\t\t\t\t<i className=\"fas fa-phone-slash\"></i>\r\n\t\t\t\t\t\t\t\t\t\t</div>)}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t)})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t\t{state.calling &&\r\n\t\t\t\t\t<div className={`video-chat_from-chat ${!state.calling && 'hidden'}`}>\r\n\t\t\t\t\t\t<Video socket={socket} myVideoStream={video} streams={videoStream} stateFull={([state, setState])} peers={peers}></Video> \r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t{!state.calling &&\r\n\t\t\t\t<>\r\n\t\t\t\t\t<i onClick={()=>setState((state)=> ({...state, chatState: false}))} className={`fas fa-times close-button ${!state.chatState ? 'hidden' : ''}`}></i>\r\n\t\t\t\t\t<div className={`text-chat ${!state.chatState && 'hidden'}`}>\r\n\t\t\t\t\t\t<TextChat selectedUser={name} socket={socket}></TextChat>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n}","import React, {useEffect, useState, lazy, Suspense} from 'react';\r\nimport Video from '../Chat';\r\nimport io from 'socket.io-client';\r\nimport './login.scss'\r\nimport Spinner from '../Spinner/Spinner';\r\n// const Video = lazy(()=> import('../Chat'));\r\n\r\nlet socket;\r\n\r\nsocket = io.connect('https://rocky-reef-68087.herokuapp.com');\r\n// socket = io.connect('http://localhost:8080/');\r\n\r\nexport default function Chat() {\r\n\tconst [state, setState] = useState({\r\n\t\tspinner: false,\r\n\t\tloggined: false, \r\n\t\tuserIsCreated: false, \r\n\t\tusers: {}\r\n\t});\r\n\r\n\tfunction submit(e){\r\n\t\tsetState((state) =>({\r\n\t\t\t...state, \r\n\t\t\tspinner: true, \r\n\t\t\tusers: {name: e.target.name.value, room: e.target.room.value}\r\n\t\t}));\r\n\t\te.preventDefault();\r\n\t\tsocket.emit('join', e.target.room.value, e.target.name.value);\r\n\t}\r\n\r\n\tuseEffect(()=>{\r\n\t\tdocument.title = 'Chat';\r\n\t\tsocket.on('message', (data)=>{\r\n\t\t\tif(data.type === 'err'){\r\n\t\t\t\tsetState((state) => ({...state, spinner: false, loggined: false, userIsCreated: true}));\r\n\t\t\t} else{\r\n\t\t\t\tsetState((state) => ({...state, spinner: false, loggined: true}));\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn ()=>{\r\n\t\t\tsocket.close();\r\n\t\t}\r\n\t}, [])\r\n\r\n\tif(!state.loggined){\r\n\t\treturn(\r\n\t\t\t<div className='login-wrap'>\r\n\t\t\t\t<form className='user-connection' onSubmit={submit}>\r\n\t\t\t\t{state.spinner && <Spinner></Spinner>}\r\n\t\t\t\t\t<h2 className=\"form-signin-heading\">Please select room and enter your nickname</h2>\r\n\t\t\t\t\t<select type='' className=\"form-control\" name=\"room\" required>\r\n\t\t\t\t\t\t<option>First room</option>\r\n\t\t\t\t\t\t<option>Second room</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t\t<input type=\"text\" className=\"form-control\" name=\"name\" placeholder=\"USER NAME\" required/>      \r\n\t\t\t\t\t{state.userIsCreated && <div className='alert'>User already in this room</div>}\r\n\t\t\t\t\t<input className=\"submitButton\" type=\"submit\" value='Enter'></input>   \r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Suspense fallback={<div className='spinner-main'><Spinner></Spinner></div>}>\r\n\t\t\t<Video socket={socket} user={state.users}></Video>\r\n\t\t</Suspense>\r\n\t);\r\n}","import React from 'react';\r\nimport './Spinner.scss';\r\n\r\nexport default function Spinner(){\r\n  return(\r\n    <div className=\"lds-dual-ring\"></div>\r\n  )\r\n}"],"sourceRoot":""}